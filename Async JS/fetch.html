<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch()</title>
</head>
<body>
    <h1>fetch()</h1>
    <p>Function used for making HTTP requests to fetch resources.
             (JSON style data, images, files)
             Simplifies asynchronous data fetching in JavaScript and
             used for interacting with APIs to retrieve and send
             data asynchronously over the web.
             fetch(url, {options})</p>



    <script>
        //using fetch in .then/catch
     const url = fetch('https://pokeapi.co/api/v2/pokemon/1')
     url.then((res=> {
        if(!res.ok){
            throw new Error("Could not fetch the data");    
        }
        return res.json()
     }))
    //  .then((data=>console.log(data)))
    //  .catch(err=>{console.error(err)})

    //same fetching resources using async and await 

    async function fetchData(){
       try{
         const res = await fetch('https://pokeapi.co/api/v2/pokemon/1'); 
        if(!res.ok){
            throw new Error("Could not fetch");
        }
        const data = await res.json()
        console.log(data)
        }
        catch(err){
        console.error(err)
        }
    }
    fetchData()

        // fetch in  async/await 
     async function products(){  
        const response = await fetch('https://dummyjson.com/products');
        const data = await response.json()
        return data
     }

     async function display(){
        let details = []; 
        try{
          details = await products();
        }
        catch(e){
            console.error(e)
        }
        console.log(details.products[0])
     }
     display();
    //  ===============================================================
    // example1 
    async function product1(){
        const res = await fetch('https://dummyjson.com/products/2');
        const data = await res.json(); 
        return data
    }

    async function display1(){
        let details = []; 
        try{
            details = await product1(); 
            console.log(details)
        }
        catch(err){
            console.log(err)
        }       
    }
    display1();
    </script>
</body>
</html>